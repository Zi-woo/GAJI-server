<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gaji.market.mapper.UserMapper">
	
    <!-- XML 파일 주석 쓰는 방법 -->
    <!-- id명은 UserMapper 클래스의 함수명과 똑같이 해주기 -->
    <select id="findAll" resultType="User">
        SELECT	*
        FROM 	User
    </select>

    <select id="read" resultType="User"> 
        SELECT  * 
        FROM    User
        WHERE   uid=#{no} 
    </select> <!-- #을 쓰면 정수는 정수열, 문자는 문자열로, $는 String --> 
    
    <insert id="create"> 
        <!--selectKey resultType="string" keyProperty="UserId" order="BEFORE">
            SELECT MAX(UserId)+1 FROM User        
        </selectKey-->   
        INSERT 
        INTO User
                (uid
                ,pw
                ,nickname
                ,birth
                ,phone
                ,manner
                ,intro
                ) 
        VALUES
                (#{uid}
                ,#{pw}
                ,#{nickname}
                ,#{birth}
                ,#{phone}
                ,'36.5'
                ,#{intro}
              ) 
    </insert> <!-- insert, update는 리턴타입 없다. select만 --> 
    
    <update id="update"> 
        UPDATE User 
        SET uid=#{uid}
            ,pw=#{pw}
            ,nickname=#{nickname}
            ,birth=#{birth}
            ,phone=#{phone}
            ,manner=#{manner}
            ,intro=#{intro}
        WHERE uid=#{uid} 
    </update> 
    
    <delete id="delete"> 
        DELETE 
        FROM User 
        WHERE uid=#{uid} 
    </delete> 

    <select id="findById" parameterType="String" resultType="User">
        SELECT *
        FROM User
        WHERE uid = #{uid}
    </select>

    <select id="findByNickname" parameterType="String" resultType="User">
        SELECT *
        FROM User
        WHERE nickname = #{nickname}
    </select>

</mapper>